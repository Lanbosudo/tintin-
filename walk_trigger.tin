#nop act;

#nop conflict with target looking for;
#act {{^\s+(船老大|老艄公)\s+\S+\(.*\)$}} {
    #if {$walk_pause == 1} {yell boat};
} {4};

#act {{^(一叶扁舟缓缓地驶了过来，艄公将一块踏脚板搭上堤岸，以便乘客上下。|岸边一只渡船上的艄公说道：正等着你呢，上来吧。)}} {enter};
#act {{^只听得江面上隐隐传来：“别急嘛，这儿正忙着呐……”}} {#delay 2 {yell boat}};
#act {{^艄公说“到啦，上岸吧”，随即把一块踏脚板搭上堤岸。}} {
    halt;yun recover;out;
    #local tmp @getStep{};
};
#act {{^大车停稳了下来，你可以下车\(xia\)了。}} {#local tmp @getStep{}};

#var walk_pause 0;

#nop chinese char might be mistaten by [^xx];
#act {{^┌───([^─]+)(─)}};
#act {{^┌───(\S+?)(?=─)}} {

    #local index_src $locationCNIndex["%2"];
    #echo {recognise %2 src: %s} $index_src;
    #if {@length{$index_src} != 0 && $index_src != 0} {
        #local src_walk $locationName[$index_src];
        #echo {index: %d, %s} $index_src $src_walk;
        #nop #line quiet @func leads to strange parameter passing..;
        #local tmp {@walk{$index_src}};
    };
};
#act {{^(你到达了(\S+)。|你的自建路径行走到达了终点。)}} {
    #nop #local dst_step $list_path[2];
    #nop #local dst_step_name $locationCNName[$locationIndex[$dst_step]];
    #nop #if {$dst_step_name == "%2"} {;
    #nop };

    #echo {arrived; check pause: %s} $walk_pause;
    #if {$walk_pause != 1} {
        #list list_path del 1;
        #local tmp @getStep{};
    };
};
